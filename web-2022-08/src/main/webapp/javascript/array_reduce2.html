<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>array_reduce2.html</title>
</head>
<body>

<script>
let students = [
	{name : 'hong' , grade : 1},
	{name : 'kim'  , grade : 1},
	{name : 'lee'  , grade : 2},
	{name : 'park' , grade : 3},
	{name : 'choi' , grade : 1}
];
console.log(students);
// let temp = {};
// let temp2 = [{}];
// let temp3 = [];
// console.log(temp);
// console.log(temp2);
// console.log(temp3);
// temp = [];
// console.log(temp);
let groupby = function(array, key){
	let r = array.reduce(function(data, obj){
		var k = obj[key];           // array.reduce(function(data, obj){ },{});  // 기본 모양
		if(!data[k]) data[k] = [];  // 한줄이라 일부러 중괄호 생략함. data[k]라는 키값이 없다면 data[k] = []; 만들어라.
		                            // data = [{1: obj, obj, ...}], [{2: obj, ojb, ...}], ...
		console.log(data[k]);
		data[k].push(obj);
		return data;
	},{});
	return r;
};
let gp = groupby(students, 'grade');
console.log(gp);
// for of를 사용하여 2학년만 출력
for(r of gp['2']){
	console.log('name : ', r.name, 'grade : ', r.grade);
}
// forEach를 사용하여 1학년만 출력
console.log('------------');
gp['1'].forEach(function(v){
	console.log('name:', v.name, 'grade:', v.grade);
});

let array5 = [1,3,7,12,35,73,1,3,37];
let reduce5 = array5.reduce(function(cur, now){
	cur[now] = ++cur[now] || 1;
	return cur;
}, {});
console.log(reduce5);
</script>

</body>
</html>



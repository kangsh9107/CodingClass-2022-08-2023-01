<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>image_preview.html</title>

<style>
#photo_file {
	display: none;
}
#photo {
	width: 200px;
	height: 250px;
	border: 5px solid #aaa;
	border-radius: 140px;
}
#photo:hover {
	cursor: pointer;
}
</style>

</head>
<body>

<h2>프로필 사진 등록</h2>
<input type='file' id='photo_file'/>
<img src='../images/anno1.png' id='photo'/>

<script>
let btnFile = document.querySelector('#photo_file');
let photo = document.querySelector('#photo');

photo.onclick = function(){  // 파일선택 버튼은 레이아웃상 안이쁘니 숨기고, 이미지누르면 선택가능하게.
	btnFile.click();         // 이미지를 누르면 파일선택 버튼을 작동시킨다.
}	                         // onclick은 클릭했을 때 // click은 클릭

/* 강사님 코드
btnFile.onchange = function(ev){
	 let file = ev.srcElement.files[0];
	 let reader = new FileReader();
	 reader.readAsDataURL(file);
	 reader.onload = function(fev){
		 let tempImg = new Image();
		 tempImg.src = this.result;
		 photo.src = tempImg.src;
	 }
 }
 */

function readImage(input){
	// input tag에 파일이 있는 경우
	if(input.files && input.files[0]){
		// FileReader 객체 생성
		let reader = new FileReader();
		// 이미지가 로드된 경우
		reader.onload = function(e){
			let previewImage = document.querySelector('#photo');
			previewImage.src = e.target.result;
		}
		// reader가 이미지를 읽게 한다
		reader.readAsDataURL(input.files[0]);
	}
}
// input file에 change 이벤트 부여
let inputImage = document.querySelector('#photo_file');
inputImage.addEventListener('change', function(e){
	readImage(e.target);
});
</script>

</body>
</html>


